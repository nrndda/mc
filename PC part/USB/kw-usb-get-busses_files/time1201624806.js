function JsHttpRequest(){var A=this;A.onreadystatechange=null;A.readyState=0;A.responseText=null;A.responseXML=null;A.status=200;A.statusText="OK";A.responseJS=null;A.caching=false;A.loader=null;A.session_name="PHPSESSID";A._ldObj=null;A._reqHeaders=[];A._openArgs=null;A._errors={inv_form_el:"Invalid FORM element detected: name=%, tag=%",must_be_single_el:"If used, <form> must be a single HTML element in the list.",js_invalid:"JavaScript code generated by backend is invalid!\n%",url_too_long:"Cannot use so long query with GET request (URL is larger than % bytes)",unk_loader:"Unknown loader: %",no_loaders:"No loaders registered at all, please check JsHttpRequest.LOADERS array",no_loader_matched:"Cannot find a loader which may process the request. Notices are:\n%"};A.abort=function(){with(this){if(_ldObj&&_ldObj.abort){_ldObj.abort()};_cleanup();if(readyState==0){return};if(readyState==1&&!_ldObj){readyState=0;return};_changeReadyState(4,true)}};A.open=function(B,C,D,E,F){with(this){if(C.match(/^((\w+)\.)?(GET|POST)\s+(.*)/i)){this.loader=RegExp.$2?RegExp.$2:null;B=RegExp.$3;C=RegExp.$4};try{if(document.location.search.match(new RegExp("[&?]"+session_name+"=([^&?]*)"))||document.cookie.match(new RegExp("(?:;|^)\\s*"+session_name+"=([^;]*)"))){C+=(C.indexOf("?")>=0?"&":"?")+session_name+"="+this.escape(RegExp.$1)}}catch(e){};_openArgs={method:(B||"").toUpperCase(),url:C,asyncFlag:D,username:E!=null?E:"",password:F!=null?F:""};_ldObj=null;_changeReadyState(1,true);return true}};A.send=function(R){if(!this.readyState){return};this._changeReadyState(1,true);this._ldObj=null;var G=[],H=[];if(!this._hash2query(R,null,G,H)){return};var I=null;if(this.caching&&!H.length){I=this._openArgs.username+":"+this._openArgs.password+"@"+this._openArgs.url+"|"+G+"#"+this._openArgs.method;var M=JsHttpRequest.CACHE[I];if(M){this._dataReady(M[0],M[1]);return false}};var J=(this.loader||"").toLowerCase();if(J&&!JsHttpRequest.LOADERS[J]){return this._error("unk_loader",J)};var K=[],L=JsHttpRequest.LOADERS;for(var N in L){var O=L[N].loader;if(!O){continue};if(J&&N!=J){continue};var P=new O(this);JsHttpRequest.extend(P,this._openArgs);JsHttpRequest.extend(P,{queryText:G.join("&"),queryElem:H,id:(new Date().getTime())+""+JsHttpRequest.COUNT++,hash:I,span:null});var Q=P.load();if(!Q){this._ldObj=P;JsHttpRequest.PENDING[P.id]=this;return true};if(!J){K[K.length]="- "+N.toUpperCase()+": "+this._l(Q)}else{return this._error(Q)}};return N?this._error("no_loader_matched",K.join("\n")):this._error("no_loaders")};A.getAllResponseHeaders=function(){with(this){return _ldObj&&_ldObj.getAllResponseHeaders?_ldObj.getAllResponseHeaders():[]}};A.getResponseHeader=function(S){with(this){return _ldObj&&_ldObj.getResponseHeader?_ldObj.getResponseHeader(S):null}};A.setRequestHeader=function(T,U){with(this){_reqHeaders[_reqHeaders.length]=[T,U]}};A._dataReady=function(V,W){with(this){if(caching&&_ldObj){JsHttpRequest.CACHE[_ldObj.hash]=[V,W]};responseText=responseXML=V;responseJS=W;if(W!==null){status=200;statusText="OK"}else{status=500;statusText="Internal Server Error"};_changeReadyState(2);_changeReadyState(3);_changeReadyState(4);_cleanup()}};A._l=function(b){var X=0,Y=0,c=this._errors[b[0]];while((Y=c.indexOf("%",Y))>=0){var a=b[++X]+"";c=c.substring(0,Y)+a+c.substring(Y+1,c.length);Y+=1+a.length};return c};A._error=function(c){c=this._l(typeof(c)=="string"?arguments:c);c="JsHttpRequest: "+c;if(!window.Error){throw c}else{if((new Error(1,"test")).description=="test"){throw new Error(1,c)}else{throw new Error(c)}}};A._hash2query=function(j,k,l,m){if(k==null){k=""};if((""+typeof(j)).toLowerCase()=="object"){var d=false;if(j&&j.parentNode&&j.parentNode.appendChild&&j.tagName&&j.tagName.toUpperCase()=="FORM"){j={form:j}};for(var e in j){var f=j[e];if(f instanceof Function){continue};var g=k?k+"["+this.escape(e)+"]":this.escape(e),h=f&&f.parentNode&&f.parentNode.appendChild&&f.tagName;if(h){var i=f.tagName.toUpperCase();if(i=="FORM"){d=true}else{if(i=="INPUT"||i=="TEXTAREA"||i=="SELECT"){}else{return this._error("inv_form_el",(f.name||""),f.tagName)}};m[m.length]={name:g,e:f}}else{if(f instanceof Object){this._hash2query(f,g,l,m)}else{if(f===null){continue};if(f===true){f=1};if(f===false){f=""};l[l.length]=g+"="+this.escape(""+f)}};if(d&&m.length>1){return this._error("must_be_single_el")}}}else{l[l.length]=j};return true};A._cleanup=function(){var n=this._ldObj;if(!n){return};JsHttpRequest.PENDING[n.id]=false;var o=n.span;if(!o){return};n.span=null;var p=function(){o.parentNode.removeChild(o)};JsHttpRequest.setTimeout(p,50)};A._changeReadyState=function(s,r){with(this){if(r){status=statusText=responseJS=null;responseText=""};readyState=s;if(onreadystatechange){onreadystatechange()}}};A.escape=function(s){return escape(s).replace(new RegExp("\\+","g"),"%2B")}};JsHttpRequest.COUNT=0;JsHttpRequest.MAX_URL_LEN=2000;JsHttpRequest.CACHE={};JsHttpRequest.PENDING={};JsHttpRequest.LOADERS={};JsHttpRequest._dummy=function(){};JsHttpRequest.TIMEOUTS={s:window.setTimeout,c:window.clearTimeout};JsHttpRequest.setTimeout=function(C,D){window.JsHttpRequest_tmp=JsHttpRequest.TIMEOUTS.s;if(typeof(C)=="string"){A=window.JsHttpRequest_tmp(C,D)}else{var A=null,B=function(){C();delete JsHttpRequest.TIMEOUTS[A]};A=window.JsHttpRequest_tmp(B,D);JsHttpRequest.TIMEOUTS[A]=B};window.JsHttpRequest_tmp=null;return A};JsHttpRequest.clearTimeout=function(B){window.JsHttpRequest_tmp=JsHttpRequest.TIMEOUTS.c;delete JsHttpRequest.TIMEOUTS[B];var A=window.JsHttpRequest_tmp(B);window.JsHttpRequest_tmp=null;return A};JsHttpRequest.query=function(B,C,D,E){var A=new this();A.caching=!E;A.onreadystatechange=function(){if(A.readyState==4){D(A.responseJS,A.responseText)}};A.open(null,B,true);A.send(C)};JsHttpRequest.dataReady=function(B){var A=this.PENDING[B.id];delete this.PENDING[B.id];if(A){A._dataReady(B.text,B.js)}else{if(A!==false){throw"dataReady(): unknown pending id: "+B.id}}};JsHttpRequest.extend=function(B,C){for(var A in C){B[A]=C[A]}};JsHttpRequest.LOADERS.xml={loader:function(F){JsHttpRequest.extend(F._errors,{xml_no:"Cannot use XMLHttpRequest or ActiveX loader: not supported",xml_no_diffdom:"Cannot use XMLHttpRequest to load data from different domain %",xml_no_headers:"Cannot use XMLHttpRequest loader or ActiveX loader, POST method: headers setting is not supported, needed to work with encodings correctly",xml_no_form_upl:"Cannot use XMLHttpRequest loader: direct form elements using and uploading are not implemented"});this.load=function(){if(this.queryElem.length){return["xml_no_form_upl"]};if(this.url.match(new RegExp("^([a-z]+://[^\\/]+)(.*)","i"))){if(RegExp.$1.toLowerCase()!=document.location.protocol+"//"+document.location.hostname.toLowerCase()){return["xml_no_diffdom",RegExp.$1]}};var A=null;if(window.XMLHttpRequest){try{A=new XMLHttpRequest()}catch(e){}}else{if(window.ActiveXObject){try{A=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){};if(!A){try{A=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}}};if(!A){return["xml_no"]};var B=window.ActiveXObject||A.setRequestHeader;if(!this.method){this.method=B&&this.queryText.length?"POST":"GET"};if(this.method=="GET"){if(this.queryText){this.url+=(this.url.indexOf("?")>=0?"&":"?")+this.queryText};this.queryText="";if(this.url.length>JsHttpRequest.MAX_URL_LEN){return["url_too_long",JsHttpRequest.MAX_URL_LEN]}}else{if(this.method=="POST"&&!B){return["xml_no_headers"]}};this.url+=(this.url.indexOf("?")>=0?"&":"?")+"JsHttpRequest="+(F.caching?"0":this.id)+"-xml";var C=this.id;A.onreadystatechange=function(){if(A.readyState!=4){return};A.onreadystatechange=JsHttpRequest._dummy;F.status=null;try{F.status=A.status;F.responseText=A.responseText}catch(e){};if(!F.status){return};try{eval("JsHttpRequest._tmp = function(id) { var d = "+F.responseText+"; d.id = id; JsHttpRequest.dataReady(d); }")}catch(e){return F._error("js_invalid",F.responseText)};JsHttpRequest._tmp(C);JsHttpRequest._tmp=null};A.open(this.method,this.url,true,this.username,this.password);if(B){for(var D=0;D<F._reqHeaders.length;D++){A.setRequestHeader(F._reqHeaders[D][0],F._reqHeaders[D][1])};A.setRequestHeader("Content-Type","application/octet-stream")};A.send(this.queryText);this.span=null;this.xr=A;return null};this.getAllResponseHeaders=function(){return this.xr.getAllResponseHeaders()};this.getResponseHeader=function(E){return this.xr.getResponseHeader(E)};this.abort=function(){this.xr.abort();this.xr=null}}};JsHttpRequest.LOADERS.script={loader:function(F){JsHttpRequest.extend(F._errors,{script_only_get:"Cannot use SCRIPT loader: it supports only GET method",script_no_form:"Cannot use SCRIPT loader: direct form elements using and uploading are not implemented"});this.load=function(){if(this.queryText){this.url+=(this.url.indexOf("?")>=0?"&":"?")+this.queryText};this.url+=(this.url.indexOf("?")>=0?"&":"?")+"JsHttpRequest="+this.id+"-"+"script";this.queryText="";if(!this.method){this.method="GET"};if(this.method!=="GET"){return["script_only_get"]};if(this.queryElem.length){return["script_no_form"]};if(this.url.length>JsHttpRequest.MAX_URL_LEN){return["url_too_long",JsHttpRequest.MAX_URL_LEN]};var A=this,B=document,C=null,D=B.body;if(!window.opera){this.span=C=B.createElement("SCRIPT");var E=function(){C.language="JavaScript";if(C.setAttribute){C.setAttribute("src",A.url)}else{C.src=A.url};D.insertBefore(C,D.lastChild)}}else{this.span=C=B.createElement("SPAN");C.style.display="none";D.insertBefore(C,D.lastChild);C.innerHTML="Workaround for IE.<s"+"cript></"+"script>";var E=function(){C=C.getElementsByTagName("SCRIPT")[0];C.language="JavaScript";if(C.setAttribute){C.setAttribute("src",A.url)}else{C.src=A.url}}};JsHttpRequest.setTimeout(E,10);return null}}};JsHttpRequest.LOADERS.form={loader:function(W){JsHttpRequest.extend(W._errors,{form_el_not_belong:"Element \"%\" does not belong to any form!",form_el_belong_diff:"Element \"%\" belongs to a different form. All elements must belong to the same form!",form_el_inv_enctype:"Attribute \"enctype\" of the form must be \"%\" (for IE), \"%\" given."});this.load=function(){var A=this;if(!A.method){A.method="POST"};A.url+=(A.url.indexOf("?")>=0?"&":"?")+"JsHttpRequest="+A.id+"-"+"form";if(A.method=="GET"){if(A.queryText){A.url+=(A.url.indexOf("?")>=0?"&":"?")+A.queryText};if(A.url.length>JsHttpRequest.MAX_URL_LEN){return["url_too_long",JsHttpRequest.MAX_URL_LEN]};var T=A.url.split("?",2);A.url=T[0];A.queryText=T[1]||""};var B=null,C=false;if(A.queryElem.length){if(A.queryElem[0].e.tagName.toUpperCase()=="FORM"){B=A.queryElem[0].e;C=true;A.queryElem=[]}else{B=A.queryElem[0].e.form;for(var K=0;K<A.queryElem.length;K++){var N=A.queryElem[K].e;if(!N.form){return["form_el_not_belong",N.name]};if(N.form!=B){return["form_el_belong_diff",N.name]}}};if(A.method=="POST"){var U="multipart/form-data",V=(B.attributes.encType&&B.attributes.encType.nodeValue)||(B.attributes.enctype&&B.attributes.enctype.value)||B.enctype;if(V!=U){return["form_el_inv_enctype",U,V]}}};var D=B&&(B.ownerDocument||B.document)||document,E="jshr_i_"+A.id,F=A.span=D.createElement("DIV");F.style.position="absolute";F.style.display="none";F.style.visibility="hidden";F.innerHTML=(B?"":"<form"+(A.method=="POST"?" enctype=\"multipart/form-data\" method=\"post\"":"")+"></form>")+"<iframe name=\""+E+"\" id=\""+E+"\" style=\"width:0px; height:0px; overflow:hidden; border:none\"></iframe>";if(!B){B=A.span.firstChild};D.body.insertBefore(F,D.body.lastChild);var G=function(N,O){var I=[],J=N;if(N.mergeAttributes){var J=D.createElement("form");J.mergeAttributes(N,false)};for(var K=0;K<O.length;K++){var L=O[K][0],M=O[K][1];I[I.length]=[L,J.getAttribute(L)];J.setAttribute(L,M)};if(N.mergeAttributes){N.mergeAttributes(J,false)};return I},H=function(){top.JsHttpRequestGlobal=JsHttpRequest;var P=[];if(!C){for(var K=0,R=B.elements.length;K<R;K++){P[K]=B.elements[K].name;B.elements[K].name=""}};var Q=A.queryText.split("&");for(var K=Q.length-1;K>=0;K--){var S=Q[K].split("=",2),N=D.createElement("INPUT");N.type="hidden";N.name=unescape(S[0]);N.value=S[1]!=null?unescape(S[1]):"";B.appendChild(N)};for(var K=0;K<A.queryElem.length;K++){A.queryElem[K].e.name=A.queryElem[K].name};var I=G(B,[["action",A.url],["method",A.method],["onsubmit",null],["target",E]]);B.submit();G(B,I);for(var K=0;K<Q.length;K++){B.lastChild.parentNode.removeChild(B.lastChild)};if(!C){for(var K=0,R=B.elements.length;K<R;K++){B.elements[K].name=P[K]}}};JsHttpRequest.setTimeout(H,100);return null}}};
tootlip_style="visibility: hidden; position: absolute; width: 200px; height: 50px; background-color:#a5b5f3";function addTranslitListener(C,D){if(operaold){D.style.display="none";if(typeof(D.hideLabel)=="finction")
D.hideLabel();return};var A=C,B=D;document.IDElement=document.getElementById;window.MyDoc=document;MyDoc.IDElement;ensureAddEventListener(A);if(!A)
return;A.addEventListener("click",storeBuffer,false);A.addEventListener("keydown",onescapebutton,false);A.addEventListener("keypress",encodeCharacter,false);A.addEventListener("keyup",doTranslit,false);A.translitChecker=B;A.checkTheBox=checkTheBox;if(!B.hasToolTipTranslitListener){ensureAddEventListener(B);B.addEventListener("click",checkTheBox,false);B.checked=(getCookie("translit"+B.id)=="true")?true:false;B.hasToolTipTranslitListener=true}};var ie=((document.all)&&(!document.getSelection))?1:0,n6=(window.sidebar)?1:0,opera=((document.all)&&(document.getSelection))?1:0,operaold=opera&&(navigator.userAgent.substr(navigator.userAgent.toLowerCase().indexOf('opera')+6,5)<'7.21   '),NB="",latin_alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#'",kyrill_alphabet="АБЦДЕФГХИЙКЛМНОПЯРСТУВЩХЫЗабцдефгхийклмнопярстувщхызъь",CD=false,MB="",bE=0,sbros=false,was=false,tr_obj,loc=new String(self.location);vingrad=(loc.search('vingrad.ru')!=-1);function onescapebutton(A){if(A.keyCode!=27){if(sbros){MB=tr_obj.value;sbros=false}};return true};function checkTheBox(A){deleteCookie("translit"+this.id);setCookie("translit"+this.id,this.checked)};function encodeCharacter(K){if(!this.translitChecker.checked||K.ctrlKey)
return;var A=0,B=0,C=0,D='',E='',F,G,H,I,J;G=(ie)?K.keyCode:K.charCode;H=String.fromCharCode(G);if(ie){selectionRange=MyDoc.selection.createRange();F=selectionRange.duplicate();selectionRange.text="";selectionRange.moveStart("character",-1);I=selectionRange.text;if(!I){I="";F.select()}else{I=I.charAt(0);selectionRange.select()};J=translateCharacter(I,H);if(!CD){F.select();return};if(J.length>1){J=J.charAt(1);selectionRange.moveStart("character",1);selectionRange.select()};K.keyCode=J.charCodeAt(0)}else
if(n6){if(G&&(!(K.ctrlKey||K.altKey))){B=post.target.selectionStart;if(B>0)
I=post.target.value[B-1];else I='';J=translateCharacter(I,H);if(!CD)
return;if(J.length==2){J=J.charAt(1)}else{post.target.selectionStart=B-1};A=post.target.scrollLeft;C=post.target.scrollTop;B=post.target.selectionStart+1;D=post.target.value.substring(post.target.value,post.target.selectionStart);E=post.target.value.substr(post.target.selectionEnd);post.target.value=D+J+E;post.target.selectionStart=post.target.selectionEnd=B;post.target.scrollTop=C;post.target.scrollLeft=A;K.preventDefault();return false}};return true};function getKey(E,F){var A=F.toLowerCase(),B=E.toLowerCase(),C=(E==B)?false:true,D="";switch(B){case'ь':{return C?('0'):(A=='\''?'Ь':'0')};break;case'ъ':{return C?('0'):(A=='#'?'Ъ':'0')};break;case'й':{switch(A){case'o':{return restoreCase(C,'ё')};case'a':{return restoreCase(C,'я')};case'u':{return restoreCase(C,'ю')};case'e':{return restoreCase(C,'э')};default:return'0'}};break;case'з':{return A=='h'?restoreCase(C,'ж'):'0'};break;case'с':{return A=='h'?restoreCase(C,'ш'):'0'};break;case'ш':{return A=='h'?restoreCase(C,'щ'):'0'};break;case'ц':{return A=='h'?restoreCase(C,'ч'):'0'};break;case'х':{return A=='h'?restoreCase(C,'щ'):'0'};break;case'и':{return A=='\''?restoreCase(C,'й'):'0'}};return'0'};function restoreCase(A,B){return A?B.toUpperCase():B};function translateCharacter(D,E){CD=true;var A=getKey(D,E);if(A!='0'){return A};var B=E.charCodeAt(0)-'a'.charCodeAt(0);if(26>B&&B>-1){return D+kyrill_alphabet.charAt(B+26)}else{var C=E.charCodeAt(0)-'A'.charCodeAt(0);if(26>C&&C>-1){return D+kyrill_alphabet.charAt(C)}else{if('\''==E){return D+'ь'}else{if('#'==E){return D+'ъ'}}}};CD=false;return D+E};function storeBuffer(){NB=this.value};function isCharacter(A){return((A>='A'&&A<='Z')||(A>='a'&&A<='z')||A=='\''||A=='#'||A.charCodeAt(0)==222||A.charCodeAt(0)==51)};function doTranslit(A){sbros=true;tr_obj=this;if(!tr_obj.translitChecker.checked||A.keyCode==27)
return;if(ie||n6)
return;if(!A.ctrlKey&&was){was=false;return};if(A.ctrlKey){was=true;return}else{was=false};if(!isCharacter(String.fromCharCode(A.keyCode))){return};checkEvent(tr_obj,A)};function transliterateWholetext(E){var A="",B=E.length;if(B==0)
return E;A+=translateCharacter('',E.charAt(0));if(B==1){return A};for(var C=1;C<B;C++){if(!bE){var D=translateCharacter(A.charAt(A.length-1),E.charAt(C));if(D.length==2){A+=D.charAt(1)}else{A=A.substring(0,A.length-1)+D}}else{A+=E.charAt(C)}};bE=false;return A};function checkEvent(H,I){var A=H;NB=A.value;var B=NB.length<MB.length?NB.length:MB.length,C=Math.abs(NB.length-MB.length);if(MB.length==0){A.value=transliterateWholetext(NB);return};var D=mid=end="";for(var F=0;F<B;F++){if(NB.charAt(F)!=MB.charAt(F)){D=MB.substr(0,F-1);mid=transliterateWholetext(NB.substr(F-1,B==NB.length?C:C+1));end=NB.substr(F+C,NB.length-(F+C));A.value=D+mid+end;return}};var E=translateCharacter(NB.charAt(B-1),NB.charAt(B));if(E.length==2){var G=NB.charAt(B-1)+transliterateWholetext(NB.substr(B,NB.length-(B)));if(!CD)
return;A.value=A.value.substr(0,B-1)+G}else{if(E.length==1){var G=transliterateWholetext(E+NB.substr(B,NB.length-(B+1)));A.value=A.value.substr(0,B-1)+E}}};
var post;function ToolMenu_init(){var A=document.getElementById("Post_area");if(A){post=new TextAreaSelectionHelper(A);post.target['submitPost']=post.target.submit;HotKeyHandler.alt_keys={"t":onswitchkod,"b":function(){ubbc_wrapTags("[B]","[/B]")},"\r":function(){sendForm('submit')}};HotKeyHandler.keys={"\r":function(){sendForm('submit')},"b":function(){ubbc_wrapTags("[B]","[/B]")},"B":function(){ubbc_wrapTags("[B]","[/B]")},"i":function(){ubbc_wrapTags("[I]","[/I]")},"u":function(){ubbc_wrapTags("[U]","[/U]")},"S":function(){ubbc_wrapTags("[S]","[/S]")},"q":function(){ubbc_wrapTags("[quote]\n","\n[/quote]")},"Q":function(){ubbc_wrapTags("[quote]\n","\n[/quote]")},"l":function(){ubbc_insertListTag()},"k":function(){ubbc_addBefore("[*]")},"h":ubbc_inserLink,"H":ubbc_inserLink,"e":ubbc_inserEMail,"p":ubbc_inserPicture,"F":ubbc_inserFlash,"T":onswitchkod,"\x1B":onswitchkod,"\u00FB":function(){post.indentBlock("    ",false)},"\u00FD":function(){post.indentBlock("    ",true)},"[":function(){post.indentBlock("    ",false)},"]":function(){post.indentBlock("    ",true)}}}else{HotKeyHandler.keys={"\r":function(){sendForm('submit')},"\n":function(){sendForm('submit')}}};HotKeyHandler.windowInit()};function onswitchkod(){if(!post.target||!post.target.translitChecker)
return;post.target.translitChecker.checked=!post.target.translitChecker.checked;deleteCookie("translit"+post.target.translitChecker.id);setCookie("translit"+post.target.translitChecker.id,post.target.translitChecker.checked);post.target.focus()};var menu,menu2,menu3,menu4;function ToolMenu_loadData(A){menu=new ToolMenu(document.getElementById("color_key"));menu.add(new ToolMenuHeading("&nbsp;"));menu.add(new ToolMenuItem("<span style='color: skyblue;'>"+lang_js['skyblue']+"</span>","[color=skyblue]","[/color]"));menu.add(new ToolMenuItem("<span style='color: royalblue;'>"+lang_js['royalblue']+"</span>","[color=royalblue]","[/color]"));menu.add(new ToolMenuItem("<span style='color: blue;'>"+lang_js['blue']+"</span>","[color=blue]","[/color]"));menu.add(new ToolMenuItem("<span style='color: darkblue;'>"+lang_js['darkblue']+"</span>","[color=darkblue]","[/color]"));menu.add(new ToolMenuItem("<span style='color: orange;'>"+lang_js['orange']+"</span>","[color=orange]","[/color]"));menu.add(new ToolMenuItem("<span style='color: orangered;'>"+lang_js['orangered']+"</span>","[color=orangered]","[/color]"));menu.add(new ToolMenuItem("<span style='color: crimson;'>"+lang_js['crimson']+"</span>","[color=crimson]","[/color]"));menu.add(new ToolMenuItem("<span style='color: red;'>"+lang_js['red']+"</span>","[color=red]","[/color]"));menu.add(new ToolMenuItem("<span style='color: firebrick;'>"+lang_js['firebrick']+"</span>","[color=firebrick]","[/color]"));menu.add(new ToolMenuItem("<span style='color: darkred;'>"+lang_js['darkred']+"</span>","[color=darkred]","[/color]"));menu.add(new ToolMenuItem("<span style='color: green;'>"+lang_js['green']+"</span>","[color=green]","[/color]"));menu.add(new ToolMenuItem("<span style='color: limegreen;'>"+lang_js['limegreen']+"</span>","[color=limegreen]","[/color]"));menu.add(new ToolMenuItem("<span style='color: seagreen;'>"+lang_js['seagreen']+"</span>","[color=seagreen]","[/color]"));menu.add(new ToolMenuItem("<span style='color: deeppink;'>"+lang_js['deeppink']+"</span>","[color=deeppink]","[/color]"));menu.add(new ToolMenuItem("<span style='color: tomato;'>"+lang_js['tomato']+"</span>","[color=tomato]","[/color]"));menu.add(new ToolMenuItem("<span style='color: coral;'>Coral</span>","[color=coral]","[/color]"));menu.add(new ToolMenuItem("<span style='color: purple;'>"+lang_js['purple']+"</span>","[color=purple]","[/color]"));menu.add(new ToolMenuItem("<span style='color: indigo;'>"+lang_js['indigo']+"</span>","[color=indigo]","[/color]"));menu.add(new ToolMenuItem("<span style='color: burlywood;'>"+lang_js['burlywood']+"</span>","[color=burlywood]","[/color]"));menu.add(new ToolMenuItem("<span style='color: sandybrown;'>"+lang_js['sandybrown']+"</span>","[color=sandybrown]","[/color]"));menu.add(new ToolMenuItem("<span style='color: sienna;'>"+lang_js['sienna']+"</span>","[color=sienna]","[/color]"));menu.add(new ToolMenuItem("<span style='color: chocolate;'>"+lang_js['chocolate']+"</span>","[color=chocolate]","[/color]"));menu.add(new ToolMenuItem("<span style='color: teal;'>"+lang_js['teal']+"</span>","[color=teal]","[/color]"));menu.add(new ToolMenuItem("<span style='color: silver;'>"+lang_js['silver']+"</span>","[color=silver]","[/color]"));menu.build(120);menu2=new ToolMenu(document.getElementById("size_key"));menu2.add(new ToolMenuHeading("&nbsp;"));menu2.add(new ToolMenuItem(lang_js['font_verysmall'],"[size=1]","[/size]"));menu2.add(new ToolMenuItem(lang_js['font_small'],"[size=2]","[/size]"));menu2.add(new ToolMenuItem(lang_js['font_middle'],"[size=6]","[/size]"));menu2.add(new ToolMenuItem(lang_js['font_big'],"[size=8]","[/size]"));menu2.add(new ToolMenuItem(lang_js['font_verybig'],"[size=10]","[/size]"));menu2.build(90);menu3=new ToolMenu(document.getElementById("font_key"));menu3.add(new ToolMenuHeading("&nbsp;"));menu3.add(new ToolMenuItem("<span style='font-family: Arial'>Arial</span>","[font=arial]","[/font]"));menu3.add(new ToolMenuItem("<span style='font-family: Courier'>Courier</span>","[font=courier]","[/font]"));menu3.add(new ToolMenuItem("<span style='font-family: Impact'>Impact</span>","[font=impact]","[/font]"));menu3.add(new ToolMenuItem("<span style='font-family: Tahoma'>Tahoma</span>","[font=tahoma]","[/font]"));menu3.add(new ToolMenuItem("<span style='font-family: Times'>Times</span>","[font=times]","[/font]"));menu3.add(new ToolMenuItem("<span style='font-family: Verdana'>Verdana</span>","[font=verdana]","[/font]"));menu3.build(80);menu4=new ToolMenu(document.getElementById("list_key"));menu4.add(new ToolMenuHeading("&nbsp;"));menu4.add(new ToolMenuItemListFunc(lang_js['punkt1'],1));menu4.add(new ToolMenuItemListFunc(lang_js['punkt2'],2));menu4.add(new ToolMenuItemListFunc(lang_js['punkt3'],3));menu4.add(new ToolMenuItemListFunc(lang_js['punkt4'],4));menu4.add(new ToolMenuItemListFunc(lang_js['punkt5'],5));menu4.build(80);getLanguages(A)};function getLanguages(I){var A=lang_js['nocolor']+",C++,C++ Borland,Delphi,Visual Basic,VB Net,C#,Assembler,Perl,PHP,ASP,Java,Javascript,SQL,FoxPro,HTML,XML,CSS,Python,OCaml",B=A.split(","),C="nocolor,cpp,cppb,delphi,vb,vbnet,csharp,asm,perl,php,asp,java,javascript,sql,foxpro,html,xml,css,python,ocaml".split(","),D=new Array();if(B.length!=C.length)
alert("Wrong declaration!");for(var G=0;G<B.length;G++){D[C[G]]=B[G]};if(typeof(D[I])=="undefined")
I='nocolor';var E=document.getElementById("code_key_prnt");HotKeyHandler.keys["C"]=function(){ubbc_wrapTags("[code="+I+"]\n","\n[/code]")};if(!E)
return;E.onclick=HotKeyHandler.keys["C"];var F=new ToolMenu(document.getElementById("code_key"));F.add(new ToolMenuHeading("&nbsp;"));F.add(new ToolMenuItem(D[I],"[code="+I+"]\\n","\\n[/code]"));for(var H in D){if(H!=I&&typeof(D[H])!="function")
F.add(new ToolMenuItem(D[H],"[code="+H+"]\\n","\\n[/code]"))};F.build(100,-55)};
function _post_dummy(){alert("Post textarea is not fully loaded, try again later...")};post={setSelectedText:_post_dummy,getSelectedText:_post_dummy,getText:_post_dummy,setText:_post_dummy,collapse:_post_dummy};ToolMenu.currentMenu=null;ToolMenu.menuOpened=false;ToolMenu.closeTmr=null;ToolMenu.closeTimeOut=500;function ToolMenu(A){this.target=A;this.items=[];this.platf=null};ToolMenu.prototype.add=function(A){this.items.push(A)};ToolMenu.prototype.build=function(E,F,G){if(!this.target)
return;var A=this.target.offsetWidth;A=(E!=null&&A<E)?E:A;var B="<div class='jsMenu' id='"+("ToolMenu_ChildPlatform_"+this.target.id)+"' style='width: "+A+"px; position:absolute; visibility: hidden; top:0px; left:0px;'><ul>";for(var D=0;D<this.items.length;D++)
B+=this.items[D].getHTML();document.write(B+"</ul></div>");this.platf=document.getElementById("ToolMenu_ChildPlatform_"+this.target.id);this.target._ToolMenu_childID=this.platf.id;this.platf._ToolMenu_parentID=this.target.id;this.platf.style.width=A+"px";this.platf._ToolMenu_StaticWidth=A;var C=this.target.getAttribute("MenuOpenEvent");ensureAddEventListener(this.target);this.target.addEventListener((C?C:"click"),function(){if(ToolMenu.currentMenu==null||ToolMenu.currentMenu.id!=this._ToolMenu_childID){ToolMenu_Open(document.getElementById(this._ToolMenu_childID))}else{ToolMenu.menuOpened=false;ToolMenu_Close(ToolMenu.currentMenu)}},false);this.target.addEventListener("mouseover",function(){if(ToolMenu.currentMenu==null){ToolMenu.menuOpened=false;return};if(this._ToolMenu_childID==ToolMenu.currentMenu.id)
ToolMenu.menuOpened=true},false);this.target.addEventListener("mouseout",function(){ToolMenu.menuOpened=false},false);ensureAddEventListener(this.platf);this.platf.addEventListener("mouseover",function(){ToolMenu.menuOpened=true},false);this.platf.addEventListener("mouseout",function(){ToolMenu.menuOpened=false},false);F=(F||0);G=(G||0);G+=-4;this.platf._ToolMenu_OffsetY=G;this.platf._ToolMenu_OffsetX=F};function ToolMenu_Open(E){if(ToolMenu.currentMenu!=E)
ToolMenu_Close(ToolMenu.currentMenu)
else return;var A=document.getElementById(E._ToolMenu_parentID),B=E._ToolMenu_StaticWidth;E.style.width=((A.offsetWidth>B)?A.offsetWidth:B)+"px";var C=getPosition(A);E.style.top=(C.y+A.offsetHeight+parseInt(E._ToolMenu_OffsetY))+"px";E.style.left=((C.x+parseInt(E._ToolMenu_OffsetX)+"px"));E.style.visibility="visible";var D=getOperaVersion();ToolMenu.currentMenu=E;ToolMenu.menuOpened=true;ToolMenu.closeTmr=window.setInterval("ToolMenu_Close(ToolMenu.currentMenu)",ToolMenu.closeTimeOut)};function ToolMenu_Close(B){if(!B)
return;if(!ToolMenu.menuOpened){B.style.visibility="hidden";var A=getOperaVersion();ToolMenu.currentMenu=null;ToolMenu.menuOpened=false;window.clearInterval(ToolMenu.closeTmr)}};function ToolMenuItem(A,B,C){this.name=A||"";this.startTag=B||"";this.endTag=C||"";this.getHTML=function(){return"<li><a "+((document.all&&!document.getSelection)?"style='width:100%'":"")+" href=\"#\" onClick=\"ubbc_wrapTags('"+this.startTag+"', '"+this.endTag+"'); ToolMenu.menuOpened=false; ToolMenu_Close(ToolMenu.currentMenu); return false;\">&nbsp;&nbsp;"+this.name+"</a></li>\n"}};function ToolMenuHeading(A){this.name=A;this.getHTML=function(){return"<li class='heading'>"+this.name+"</li>"}};function ToolMenuSeparator(){this.getHTML=function(){return"<li class='separator'>&nbsp;</li>"}};function ToolMenuItemListFunc(A,B){this.name=A;this.cval=B;this.getHTML=function(){return"<li><a "+((document.all&&!document.getSelection)?"style='width:100%'":"")+" href=\"#\" onClick=\"ubbc_insertListTag("+this.cval+"); ToolMenu.menuOpened=false; ToolMenu_Close(ToolMenu.currentMenu); return false\">&nbsp;&nbsp;"+this.name+"</a></li>\n"}};function isUrl(A){return new RegExp("^[a-zA-Z]{1,8}:\/\/.+","i").test(A)};function isEmail(C){var A=new RegExp("(@.*@)|(\\.\\.)|(@\\.)|(^\\.)"),B=new RegExp("^.+\\@(\\[?)[a-zA-Z0-9\\-\\.]+\\.([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$");return(!A.test(C)&&B.test(C))};function ubbc_wrapTags(A,B){post.setSelectedText(A,B);post.collapse(false)};function ubbc_insertListTag(D){if(!post)
return;var A=post.getSelectedText();if(!D&&!A){post.setSelectedText("[list]\n","\n[/list]");post.collapse(true)}else if(!D&&A){A=A.replace(/\n/g,'\n[*]');post.setSelectedText("[list]\n[*]"+A+"\n[/list]\n");post.collapse(true)}else{if(A)
A+="\n";var B=A+"[list]\n";for(var C=0;C<D;C++)
B+="[*]\n";B+="[/list]\n";post.setSelectedText(B);post.collapse(false)}};function ubbc_addBefore(A){post.appendBeforeSelectionText(A);post.collapse(false)};function ubbc_addAfter(A){post.appendAfterSelectionText(A);post.collapse(false)};function ubbc_addAfterQuote(A){if(post&&post.target){post.target.value+=((post.target.value=="")?"":'\n')+A}};function ubbc_inserLink(){var A="http://",B="",C=post.getSelectedText();if(C){if(isUrl(C))
A=C;else B=C};A=window.prompt(lang_js['enter_link'],A)||false;if(A===false)
return;if(!isUrl(A)&&!window.confirm(lang_js['incorrect_link']+" "+URL+lang_js['prodoljit?']))
return;B=window.prompt(lang_js['enter_descr'],B);if(B==null)
return;if(B=='')
B=A;post.setSelectedText("[url="+A+"]"+B+"[/url]");post.collapse(false)};function ubbc_inserEMail(){var A="",B="",C=post.getSelectedText();if(C){if(isEmail(C))
A=C;else B=C};A=prompt(lang_js['enter_email'],A)||false;if(A===false)
return;if(!isEmail(A)&&!window.confirm(lang_js['incorrect_email']+" "+A+lang_js['prodoljit?']))
return;B=prompt(lang_js['enter_descr'],B)||A;post.setSelectedText("[email="+A+"]"+B+"[/email]");post.collapse(false)};function ubbc_inserPicture(){var A=post.getSelectedText(),B=(A&&isUrl(A))?A:window.prompt("\n"+lang_js['enter_img_url'],"http://")||false;if(B===false)
return;if(!isUrl(B)&&!window.confirm(lang_js['incorrect_img_url']+" "+B+lang_js['prodoljit?']))
return;post.setSelectedText("[IMG]"+B+"[/IMG]");post.collapse(false)};var flash_w='200',flash_h='400';function ubbc_inserFlash(){var A="http://",B="",C="",D=post.getSelectedText();if(D&&isUrl(D)){A=D;D=""};A=window.prompt("Введите URL Flash объекта:",A)||false;if(A===false)
return;if(!isUrl(A)&&!window.confirm("Вы ввели не корректный URL Flash объекта: "+A+lang_js['prodoljit?']))
return;C=window.prompt("Введите ширину Flash:\nMax = "+flash_w,C)||"";B=window.prompt("Введите высоту Flash:\nMax = "+flash_h,B)||"";if(isNaN(C)||(C>flash_w))
C=flash_w;if(isNaN(B)||(B>flash_h))
B=flash_h;post.setSelectedText(((D)?D+" ":"")+"[flash="+C+","+B+"]"+A+"[/flash]");post.collapse(false)};
function getPosition(C){var A=0,B=0;while(C){A+=C.offsetLeft;B+=C.offsetTop;C=C.offsetParent};return{x:A,y:B}};function win_resize(D,E){if((typeof(E)!='string')||E=='')
E='Post_area';var A=document.getElementById(E);if((A)&&(A.style)){var B=parseInt(A.style.height),C=D;if(isNaN(B)||B<0)
B=300;C+=B;if(C>250)
A.style.height=C+"px"};if(A)
A.focus();return false};function getOperaVersion(){var A=navigator.userAgent.match(/Opera\s*([0-9.]+)/i);return(A&&A.length>1)?parseFloat(A[1]):0};if(!Array.prototype.top)
Array.prototype.top=function(){return this.length>0?this[this.length-1]:null};if(!Array.prototype.push)
Array.prototype.push=function(){for(var A=0;A<arguments.length;A++)
this[this.length]=arguments[A];return this.length};if(!Array.prototype.pop)
Array.prototype.pop=function(){var A=this.length>0?this[this.length-1]:null;if(this.length>0)
this.length--;return A};if(!Array.prototype.splice)
Array.prototype.splice=function(G,H){var A=this.slice(0,G),B=this.slice(G+H),C=this.slice(G,G+H),D=[];D.length=arguments.length-2;for(var F=2;F<arguments.length;F++)
D[F-2]=arguments[F];var E=A.concat(D,B);this.length=0;for(var F=0;F<E.length;F++)
this[F]=E[F];return C};if(!Array.prototype.shift)
Array.prototype.shift=function(){return this.splice(0,1)};if(!Array.prototype.unshift)
Array.prototype.unshift=function(){var A=[];for(var C=0;C<arguments.length;C++)
A[C]=arguments[C];var B=A.concat(this);for(var C=0;C<B.length;C++)
this[C]=B[C];return this.length};if(!Array.prototype.toSource)
Array.prototype.toSource=function(){for(var A=0;A<this.length;A++)
this[A]=this[A].toString().replace(/(["'\\"])/g,"\\$1").replace(/\n/g,"\\n");return"[\""+this.join("\", \"")+"\"]"};function ensureAddEventListener(A){if(!A)
return;if(!A.addEventListener)
A.addEventListener=myEventListener};function myEventListener(D,E,F){if(!this.elisteners)
this.elisteners={};if(!this.elisteners[D])
this.elisteners[D]=[];for(var B=0;B<this.elisteners[D].length;B++)
if(this.elisteners[D][B][0]==E)
return;var A="mev_"+D+"_"+this.elisteners[D].length+"_"+Math.floor(Math.random()*1000);this[A]=E;this.elisteners[D].push([E,A]);if(typeof(this["on"+D])=="function"&&this["on"+D]!=myEventHandler){var C=this["on"+D];this["on"+D]=null;this.addEventListener(D,C,false)};this["on"+D]=myEventHandler};function myEventHandler(C){var A=window.event?window.event:C;if(A&&this.elisteners[A.type])
for(var B=0;B<this.elisteners[A.type].length;B++){this[this.elisteners[A.type][B][1]](A)}};function TextAreaSelectionHelper(A){this.target=A;this.target.carretHandler=this;ensureAddEventListener(this.target);this.target.addEventListener("change",_textareaSaver,false);this.target.addEventListener("click",_textareaSaver,false);this.target.addEventListener("keyup",_textareaSaver,false);this.target.addEventListener("focus",_textareaSaver,false);this.target.addEventListener("select",_textareaSaver,false);this.start=-1;this.end=-1;this.scroll=-1;this.iesel=null};TextAreaSelectionHelper.prototype.getSelectedText=function(){return this.iesel?this.iesel.text:(this.start>=0&&this.end>this.start)?this.target.value.substring(this.start,this.end):""};TextAreaSelectionHelper.prototype.setSelectedText=function(E,F){if(this.iesel&&(window.opera||this.iesel.parentElement()==this.target)){if(typeof(F)=="string"){var A=this.iesel.text.length;this.iesel.text=E+this.iesel.text+F;this.iesel.moveEnd("character",-F.length);this.iesel.moveStart("character",-A)}else this.iesel.text=E;this.iesel.select()}else if(this.start>=0&&this.end>=this.start){var B=this.target.value.substring(0,this.start),C=this.target.value.substr(this.end),D=this.target.value.substring(this.start,this.end);if(typeof(F)=="string"){this.target.value=B+E+D+F+C;this.end=this.target.selectionEnd=this.start+E.length+D.length;this.start=this.target.selectionStart=this.start+E.length}else{this.target.value=B+E+C;this.end=this.target.selectionEnd=this.start+E.length;this.start=this.target.selectionStart=this.start+E.length};this.target.scrollTop=this.scroll;this.target.focus()}else{this.target.value+=E+((typeof(F)=="string")?F:"");if(this.scroll>=0)
this.target.scrollTop=this.scroll}};TextAreaSelectionHelper.prototype.appendBeforeSelectionText=function(D){if(this.iesel&&(window.opera||this.iesel.parentElement()==this.target)){this.iesel.text=D+this.iesel.text;this.iesel.collapse(true);this.iesel.select()}else if(this.start>=0&&this.end>=this.start){var A=this.target.value.substring(0,this.start),B=this.target.value.substr(this.end),C=this.target.value.substring(this.start,this.end);this.target.value=A+D+C+B;this.start=this.target.selectionStart=this.end=this.target.selectionEnd=this.start+D.length+C.length;this.target.scrollTop=this.scroll;this.target.focus()}else{this.target.value+=D;if(this.scroll>=0)
this.target.scrollTop=this.scroll}};TextAreaSelectionHelper.prototype.appendAfterSelectionText=function(D){if(this.iesel&&(window.opera||this.iesel.parentElement()==this.target)){this.iesel.text=this.iesel.text+D;this.iesel.collapse(true);this.iesel.select()}else if(this.start>=0&&this.end>=this.start){var A=this.target.value.substring(0,this.start),B=this.target.value.substr(this.end),C=this.target.value.substring(this.start,this.end);this.target.value=A+C+D+B;this.start=this.target.selectionStart=this.end=this.target.selectionEnd=this.start+D.length+C.length;this.target.scrollTop=this.scroll;this.target.focus()}else{this.target.value+=D;if(this.scroll>=0)
this.target.scrollTop=this.scroll}};TextAreaSelectionHelper.prototype.getText=function(){return this.target.value};TextAreaSelectionHelper.prototype.setText=function(A){this.target.value=A};TextAreaSelectionHelper.prototype.collapse=function(A){if(A===false){if(this.iesel&&(window.opera||this.iesel.parentElement()==this.target))
this.iesel.collapse(false);else this.start=this.end=this.target.selectionStart=this.target.selectionEnd}else{if(this.iesel&&(window.opera||this.iesel.parentElement()==this.target))
this.iesel.collapse(true);else this.start=this.end=this.target.selectionEnd=this.target.selectionStart};if(this.iesel)
this.iesel.select()};TextAreaSelectionHelper.prototype.indentBlock=function(P,Q){if(this.iesel&&(window.opera||this.iesel.parentElement()==this.target)){var A=this.iesel.duplicate(),B,C=probeBounds(A,false),D=0,E=A.duplicate(),F=E.text.length,G,H;E.moveEnd("character",-1);if(F!=E.text.length){D=probeBounds(A,true)}else A.moveEnd("character",-1);if(Q){G=A.text.split('\n');H=window.opera?0:G.length-1;C+=P.length;G=P+G.join('\n'+P)}else{G=A.text.split('\n');H=window.opera?0:G.length-1;var I=G[0].length;for(var J=0,K=G[0];J<G.length;J++,K=G[J])
G[J]=(K.substring(0,P.length)==P)?K.substr(P.length):K;C=(C<4&&I>G[0].length)?0:C-(I-G[0].length);D=Math.min(D,G[G.length-1].length-1);G=G.join('\n')};A.text=G;A.moveStart("character",-(G.length-H-C));A.moveEnd("character",-D);this.iesel=A;this.iesel.select()}else if(this.start>=0&&this.end>=this.start){var L=(this.target.value.substring(0,this.start).lastIndexOf('\n')+1),M=this.target.value.indexOf('\n',this.end);M=M>=0?M:this.end+1;var N,C=0,D=0;if(Q){N=P+this.target.value.substring(L,M).split('\n').join('\n'+P);C=P.length;D=N.length-M+L}else{N=this.target.value.substring(L,M).split('\n'+P);var O=N[N.length-1].lastIndexOf('\n')+1;O=(O==0)?Math.max(0,P.length-(N[N.length-1].length-(M-this.end)+4)):0;if(N[0].substr(0,P.length)==P){N[0]=N[0].substr(P.length);C=P.length};C=-Math.min(this.start-L,C);N=N.join('\n');D=(N.length-M+L+O)};this.target.value=this.target.value.substring(0,L)+N+this.target.value.substr(M);this.start=this.target.selectionStart=this.start+C;this.end=this.target.selectionEnd=this.end+D;this.target.scrollTop=this.scroll;this.target.focus()}};function probeBounds(F,G){if(G&&F.text.charAt(F.text.length-1)==(window.opera?'\n':'\r'))
return 0;var A=F.duplicate(),B,C=0;do{B=A.text.length;G?A.moveEnd("character",1):A.moveStart("character",-1);C--}while(A.text.length>B&&A.text.charAt(G?A.text.length-1:0)!=(window.opera?'\n':'\r'));G?F.moveEnd("character",-C-1):F.moveStart("character",C+1);if(!G){var D=F.duplicate();D.moveStart("character",1);if(D.text.length==F.text.length){var E=F.duplicate();E.moveEnd("character",1);E.moveStart("character",1);if(E.parentElement()==F.parentElement()){F.moveEnd("character",1);probeBounds.moved=1}else{}}}else{C-=probeBounds.moved?probeBounds.moved:0;probeBounds.moved=0};return-(C+1)};function _textareaSaver(){if(document.selection){this.carretHandler.iesel=document.selection.createRange().duplicate()}else if(typeof(this.selectionStart)!="undefined"){this.carretHandler.start=this.selectionStart;this.carretHandler.end=this.selectionEnd;this.carretHandler.scroll=this.scrollTop}else{this.carretHandler.start=this.carretHandler.end=-1}};HotKeyHandler.keys={};HotKeyHandler.alt_keys={};HotKeyHandler.convertIEKey={"1":65,"2":66,"4":68,"12":76,"16":80,"19":83,"20":84,"21":85,"26":90,"17":113,"10":13};function HotKeyHandler(D){var A,B,C;if(!(A=window.event?window.event:D))
return;B=A.keyCode?A.keyCode:A.charCode;if((document.all)&&(!document.getSelection)){B=HotKeyHandler.convertIEKey[String(B)]?HotKeyHandler.convertIEKey[String(B)]:B};if(A&&((B==27)||(A.altKey!=A.ctrlKey))){B=String.fromCharCode(B);B=A.shiftKey?B.toUpperCase():B.toLowerCase();C=HotKeyHandler.keys;if(A.altKey)
C=HotKeyHandler.alt_keys;if(typeof(C[B])=="function"){C[B](A);A.cancelBubble=true;A.returnValue=false;if(A.preventDefault)
A.preventDefault();if(A.stopPropagation)
A.stopPropagation();return false}};return true};HotKeyHandler.windowInit=function(){if(post&&post.target&&post.target.addEventListener&&(getOperaVersion()>6||getOperaVersion()==0)){post.target.addEventListener("keypress",HotKeyHandler,false)}else{ensureAddEventListener(document);document.addEventListener("keydown",HotKeyHandler,false)}};function setCookie(B,C,D,E,F,G){var A=B+"="+escape(C)+((D)?";expires="+D:"")+((E)?";path="+E:"")+((F)?";domain="+F:"")+((G)?";secure":"");if((escape(C)).length<=4000)
document.cookie=A+";"};function getCookie(D){var A=D+"=",B=document.cookie.indexOf(A);if(B==-1)
return null;var C=document.cookie.indexOf(";",B+A.length);if(C==-1)
C=document.cookie.length;return unescape(document.cookie.substring(B+A.length,C))};function deleteCookie(A,B,C){if(getCookie(A)){document.cookie=A+"="+((B)?"; path="+B:"")+((C)?"; domain="+C:"")+"; expires=Thu, 01-Jan-99 00:00:01 GMT"}};function RollOver_init(){for(var A=0;A<document.images.length;A++){if(document.images[A].className){var B=document.images[A].className;B=(new RegExp("preload([0-9]+)")).exec(B);if(!B||isNaN(B=parseInt(B[1])))
continue;document.images[A].preload_num=B;ensureAddEventListener(document.images[A]);document.images[A].addEventListener("mouseover",RollOver_on,false);document.images[A].addEventListener("mouseout",RollOver_off,false)}}};function RollOver_on(){var A=document.getElementById("img"+this.preload_num);this.backSrc=this.src;if(A&&A.complete)
this.src=A.src};function RollOver_off(){this.src=this.backSrc};function getHtml_f(A){return'<br /> <span class="nobr"><a onclick="ubbc_wrapTags(\'[align=left]\',\'[/align]\'); return false;" href="javascript: ubbc_wrapTags(\'[align=left]\',\'[/align]\');"><img src="'+A+'/fa_textleft.gif" alt="'+lang_js['align_left']+'" title="'+lang_js['align_left']+'" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="ubbc_wrapTags(\'[align=center]\',\'[/align]\'); return false;" href="javascript: ubbc_wrapTags(\'[align=center]\',\'[/align]\');"><img src="'+A+'/fa_textcenter.gif" alt="По центру" title="'+lang_js['align_center']+'" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="ubbc_wrapTags(\'[align=right]\',\'[/align]\'); return false;" href="javascript: ubbc_wrapTags(\'[align=right]\',\'[/align]\');"><img src="'+A+'/fa_textright.gif" alt="'+lang_js['align_right']+'" title="'+lang_js['align_right']+'" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsepbig" /></span> <span class="nobr"><a onclick="ubbc_insertListTag(); return false;" href="javascript: ubbc_insertListTag();"><img src="'+A+'/fa_list.gif" alt="'+lang_js['list']+'" title="'+lang_js['list']+' [Ctrl+L]" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="ubbc_addBefore(\'[*]\'); return false;" href="javascript: ubbc_addBefore(\'[*]\');"><img src="'+A+'/fa_list1.gif" alt="'+lang_js['list_element']+'" title="'+lang_js['list_element']+' [Ctrl+K]" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsepbig" /></span> <span class="nobr"><a onclick="ubbc_wrapTags(\'[B]\',\'[/B]\'); return false;" href="javascript: ubbc_wrapTags(\'[B]\',\'[/B]\');"><img src="'+A+'/fa_bold.gif" alt="'+lang_js['bold']+'" title="'+lang_js['bold']+' [Ctrl+B]" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="ubbc_wrapTags(\'[I]\',\'[/I]\'); return false;" href="javascript: ubbc_wrapTags(\'[I]\',\'[/I]\');"><img src="'+A+'/fa_cursive.gif" alt="'+lang_js['kursiv']+'" title="'+lang_js['kursiv']+' [Ctrl+I]" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="ubbc_wrapTags(\'[U]\',\'[/U]\'); return false;" href="javascript: ubbc_wrapTags(\'[U]\',\'[/U]\');"><img src="'+A+'/fa_underline.gif" alt="'+lang_js['podcherknutuy']+'" title="'+lang_js['podcherknutuy']+' [Ctrl+U]" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="ubbc_wrapTags(\'[S]\',\'[/S]\'); return false;" href="javascript: ubbc_wrapTags(\'[S]\',\'[/S]\');"><img src="'+A+'/fa_strikeout.gif" alt="'+lang_js['zacherknutuy']+'" title="'+lang_js['zacherknutuy']+' [Ctrl+Shift+S]" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="ubbc_wrapTags(\'[J]\',\'[/J]\'); return false;" href="javascript: ubbc_wrapTags(\'[J]\',\'[/J]\');"><img src="'+A+'/fa_move.gif" alt="'+lang_js['moved_element']+'" title="'+lang_js['moved_element']+' [Ctrl+J]" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a href="http://ipicture.ru" target="_blank"><img src="'+A+'/ipicture.jpg" alt="Insert IMG" title="Insert IMG" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsepbig" /></span> <span class="nobr"><a onclick="return false;" href="javascript: void(0);"><img src="'+A+'/fa_menu_color.gif" alt="'+lang_js['color']+'" title="'+lang_js['color']+'" id="color_key"/></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="return false;" href="javascript: void(0);"><img src="'+A+'/fa_menu_size.gif" alt="'+lang_js['size']+'" title="'+lang_js['size']+'" id="size_key" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="return false;" href="javascript: void(0);"><img src="'+A+'/fa_menu_font.gif" alt="'+lang_js['fong']+'" title="'+lang_js['fong']+'" id="font_key" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="return false;" href="javascript: void(0);"><img src="'+A+'/fa_menu_list.gif" alt="'+lang_js['list']+'" title="'+lang_js['list']+'" id="list_key" /></a><img src="'+A+'/none.gif" alt=" " class="fatopsep" /><a onclick="return false;" href="javascript: void(0);"><img src="'+A+'/fa_menu_code1.gif" alt="'+lang_js['code']+'" title="'+lang_js['code']+' [Ctrl+Shift+C]" id="code_key_prnt" /><img src="'+A+'/fa_menu_code2.gif" alt="&nbsp;&raquo;&nbsp;" title="'+lang_js['select_highlight']+'" id="code_key" /></a></span><br /> <br />'};function getLeftMenu(A){return' <a onclick=\'ubbc_wrapTags("[quote]\\n","\\n[/quote]"); return false;\' href=\'javascript:ubbc_wrapTags("[quote]\\n","\\n[/quote]");\'><img src="'+A+'/fa_mm1-off.gif" class="preload14" title="'+lang_js['fast_key']+': [Ctrl+Q]" alt="цитата"  id="left_round_pm1" /></a><br /><a onclick="ubbc_inserLink(); return false;" href="javascript:ubbc_inserLink();"><img src="'+A+'/fa_mm2-off.gif" class="preload15" title="'+lang_js['fast_key']+': [Ctrl+H]" alt="'+lang_js['link']+'"  id="left_round_pm2" /></a><br /><a onclick="ubbc_inserEMail(); return false;" href="javascript:ubbc_inserEMail();"><img src="'+A+'/fa_mm3-off.gif" class="preload16" title="'+lang_js['fast_key']+': [Ctrl+E]" alt="e-mail"  id="left_round_pm3" /></a><br /><a onclick="ubbc_inserPicture(); return false;" href="javascript:ubbc_inserPicture();"><img src="'+A+'/fa_mm4-off.gif" class="preload17" title="'+lang_js['fast_key']+': [Ctrl+P]" alt="'+lang_js['img']+'"  id="left_round_pm4" /></a><br /><a onclick="ubbc_inserFlash(); return false;" href="javascript:ubbc_inserFlash();"><img src="'+A+'/fa_mm5-off.gif" class="preload18" title="'+lang_js['fast_key']+': [Ctrl+Shift+F]" alt="flash"  id="left_round_pm5" /></a><br /><a onclick="emo_pop(); return false;" href="javascript:emo_pop();"><img src="'+A+'/fa_mm6-off.gif" class="preload19" title="'+lang_js['smiles']+'" alt="'+lang_js['smiles']+'" id="left_round_pm6" /></a><br /><img src="'+A+'/fa_mm1-on.gif" class="preload" id="img14" alt="" /><img src="'+A+'/fa_mm2-on.gif" class="preload" id="img15" alt="" /><img src="'+A+'/fa_mm3-on.gif" class="preload" id="img16" alt="" /><img src="'+A+'/fa_mm4-on.gif" class="preload" id="img17" alt="" /><img src="'+A+'/fa_mm5-on.gif" class="preload" id="img18" alt="" /><img src="'+A+'/fa_mm6-on.gif" class="preload" id="img19" alt="" />'};function getSubmitRef(A,B){return'<span class="nobr"><a tabindex="31" href="javascript:document.getElementById(\''+A+'\').submit();"><b>'+B+'</b><img src="images/fa_OK.gif" alt="" /></a></span><br />'};function getDoubledSubmitRef(A,B,C){return'<span class="nobr"><a tabindex="31" href="javascript:document.getElementById(\'sendform\').submit();"><b>'+A+'</b><img src="images/fa_OK.gif" alt="" /></a></span>                                <span class="nobr"><a tabindex="31" href="javascript:document.getElementById(\'submitField\').name=\''+C+'\'; document.getElementById(\'sendform\').submit();"><b>'+B+'</b><img src="images/fa_kill.gif" alt="" /></a></span><br />'};function getSubmitRefValidateForm(A){return'<span class="nobr"><a tabindex="300" href="javascript:if (ValidateForm()) document.getElementById(\'sendform\').submit();"><b>'+A+'</b><img src="images/fa_OK.gif" alt="" /></a></span><br />'};function getSubmitPreview(A,B,C,D){return'<span class="nobr"><a tabindex="52" href="javascript:sendForm(\''+D+'\');" title="'+lang_js['fast_key']+': Ctrl+Enter"><b>'+A+'</b></a> <a href="#" title="Быстрая клавиша: Ctrl+Enter"><img src="'+C+'/fa_send.gif" alt="" /></a>&nbsp;&nbsp;</span><span class="nobr"><a tabindex="53" href="javascript:sendForm(\'preview\');"><b>'+B+'</b><img src="'+C+'/fa_preview.gif" alt="" /></a>&nbsp;&nbsp;</span><br />'};function getSubmitPreview2(A,B,C){return'<span class="nobr"><a tabindex="46" href="javascript: sendForm(\'submit\');" title="'+lang_js['fast_key']+': Ctrl+Enter"><b>'+A+'</b></a> <a href="javascript: sendForm(\'submit\');" title="Быстрая клавиша: Ctrl+Enter"><img src="'+C+'/fa_send.gif" alt="" /></a>&nbsp;&nbsp;</span><br /><br /><span class="nobr"><a tabindex="47" href="javascript: sendForm(\'preview\');"><b>'+B+'</b></a> <a href="javascript: sendForm(\'preview\');"><img src="'+C+'/fa_preview.gif" alt="" /></a>&nbsp;&nbsp;</span><br />'};function getSubmitPreviewSave(A,B,C,D){return'<span class="nobr"><a tabindex="52" href="javascript:sendForm(\'submit\');" title="'+lang_js['fast_key']+': Ctrl+Enter"><b>'+A+'</b><img src="'+D+'/fa_send.gif" alt="" /></a>&nbsp;&nbsp;</span><span class="nobr"><a tabindex="53" href="javascript:sendForm(\'preview\');"><b>'+B+'</b><img src="'+D+'/fa_preview.gif" alt="" /></a>&nbsp;&nbsp;</span><span class="nobr"><a tabindex="54" href="javascript:sendForm(\'save\');"><b>'+C+'</b><img src="'+D+'/fa_save.gif" alt="" /></a></span><br />'};function show_hide(B,C){var A=document.getElementById(B);if(A.style.display=='none'){C.alt=C.title="Скрыть исходное сообщение";A.style.display='block'}else{C.alt=C.title="Посмотреть исходное сообщение";A.style.display='none'}};
var auth_key="",show_type="",q_A={act:'idx'},c_A=false,s_t=0,v_t=false,tid=-1,scr_name="",inc_script={},post_A=0;function req_A_Send(K,L,M,N,O,P,Q,R,S){if(!Q)
Q=true;var A=new JsHttpRequest();if(typeof(L)!='object')
L=q_A;if(typeof(M)!='string'||M=='')
M='/index.php';if(M.indexOf('?')==-1)
M=M+'?';if(typeof(auth_key)=='string')
M=M+'&auth_key='+auth_key;if(typeof(show_type)=='string')
M=M+'&show_type='+show_type;if(typeof(N)!='function'){var B=getId("ajax_w");if((B)&&(B.style)){B.style.display="block";var G=(typeof(window.pageXOffset)=='number')?window.pageXOffset:document.documentElement.scrollLeft,H=(typeof(window.pageYOffset)=='number')?window.pageYOffset:document.documentElement.scrollTop,I=(typeof(window.innerWidth)=='number')?window.innerWidth:document.documentElement.clientWidth,J=(typeof(window.innerHeight)=='number')?window.innerHeight:document.documentElement.clientHeight;B.style.left=G+(I-B.offsetWidth)/2+'px';B.style.top=H+(J-B.offsetHeight)/2+'px'};if((typeof(O)!='string')||(O==''))
O='result';N=function(){if(A&&A.readyState&&(A.readyState==4)){var C={},D=getId(O);if(D){D.s_temp='!';C['q']=D};if(typeof(P)=='object'){for(var E in P){var F=P[E];if(typeof(F)=='string'){var D=getId(F);if(D){D.s_temp='!';C[E]=D}}else{if((typeof(F)=='function')||((typeof(F)=='object')&&(typeof(F.f_ajax)=='function')))
C[E]=F}}};for(var E in C){var D=C[E];if((A.responseJS)&&(A.responseJS[E])&&(D)){if(typeof(D)=='function'){D(A.responseJS[E])}else{if(D.s_temp=='!'){D.s_temp=0;D.innerHTML=A.responseJS[E]}else{D.f_ajax(A.responseJS[E],D)}}}};if((B)&&(B.style))
B.style.display="none";if((typeof(scr_name)=='string')&&(scr_name!='')){if(scrollName(scr_name)===false)
window.location.replace('#'+scr_name)};scr_name=""}}};A.onreadystatechange=N;A.caching=c_A;A.open(K,M+'&ajax=1',Q,R,S);A.send(L)};function f_post(F){var A={},B='';A['n']=-1;if(typeof(document.getElementsByTagName)!='undefined'){F=strToInt(F);var C=document.getElementsByTagName("table");if((C.length)&&(C.length>0)){var D=new RegExp('^d([0-9]*)$',"i");for(var E=0;E<C.length;E++){if(C[E].className=='posttable'){B=strToInt(C[E].id.replace(D,"$1"),0,-1);if(B>=0){A['n']++;A['t']=C[E].id;if((F==0)||(F==B))
break}}}}};return A};function func_del(B){if((B!='')&&(document.getElementById)){var A=getId('d'+B);if(A)
A.parentNode.removeChild(A)}};function func_add(F){if((F!='')&&(document.getElementById)){if((i_e)||(op_n)){var B=f_post(-1);if(B['n']>=0){var C=getId(B['t']);if(C)
C.insertAdjacentHTML('afterEnd',F)};return};var A=getId('p_all');if(A){var D=document.createRange();D.selectNode(document.body);var E=D.createContextualFragment(F);A.appendChild(E)}}};function add_post(G){var A=strToInt(G['pid']),B=getId('Post_area'),C=getId('Post_Form'),D=((typeof(G['post'])!='undefined')?1:0),E=function(){var F=getId('d'+A);if(F){scrollElement(F);return};setTimeout(E,200)};if((A>0)&&(D==1)){func_del(A)};if(D==1){func_add(G['post'])};if(B){B.value=""};setTimeout(E,200)};function func_corr(C){s_t=C['st'];var A=C['view'];s_t=strToInt(s_t,1);v_t=true;A=strToInt(A);if(A<=0)
v_t=false;if(C['go']){var B="st_"+s_t+"_view_";if(v_t){B+="1"}else{B+="0"};if(scrollName("go_p")===false)
window.location.replace("#go_p");window.location.hash=B};code_corr(1)};function code_corr(E){inc_script={};if(document.getElementsByTagName){var A=document.getElementsByTagName('code');if((A)&&(A.length>0)){if(typeof(highlightSyntax)!='function')
include_script("/html/syntax_script/core.js");var B={};for(var C=0;C<A.length;C++){var D=A.item(C).id;B=D.split('_');if((D!='')&&(B!='')&&(typeof("setup_"+B[0])!='function')&&(!inc_script[B[0]])){include_script("/html/syntax_script/"+B[0]+".js");inc_script[B[0]+'_'+C]=D}};inc_script["#0#"]=0;if(A.length>0)
setTimeout(script_time,400)}};if(typeof(inc_script["#0#"])!='number'){setTimeout(of_postcolor,200)}};function script_time(){inc_script["#0#"]++;if(inc_script["#0#"]>=750)
return;var A=0,B=0,C={};for(var D in inc_script){if(D!='#0#'){A++;C=D.split('_');if(typeof(window['setup_'+C[0]])=='function')
B++}};if((A==B)&&(typeof(highlightSyntax)=='function')){for(var D in inc_script){if(D!='#0#'){C=D.split('_');highlightSyntax(inc_script[D],C[0])}};of_postcolor();return};setTimeout(script_time,400)};function include_script(C){if((typeof(C)!='string')||(C==''))
return;var A=document.createElement('script');if(A){A.type='text/javascript';A.setAttribute('src',C);var B=document.getElementsByTagName('head')[0];if(B){B.appendChild(A)}}};function corr_msg(B){var A=strToInt(B['m'],1);if(typeof(count_messages)!='number'){count_messages=0};count_messages-=A;if((typeof(B['err'])=='string')&&(B['err']!='')){alert(B['err'])}};function m_a_ajax(E,F,G,H,I){if((F.shiftKey)||(F.button!=0))
return true;s_t=strToInt(s_t,1);var A='all';if((typeof(v_t)!='boolean')||(!v_t))
A='';G=strToInt(G,1);switch(G){case 0:{req_A_Send('GET',{act:'report',p:E,st:s_t,view:A},I,null,'edit_title');scrollId('edit_title');return false};break;case 1:{if(confirm(del_q)){var B=f_post(-1);if(B['n']>=0){req_A_Send('GET',{act:'Mod',p:E,CODE:'04',st:s_t,sp:B['n'],view:A},I,null,'s_pages_1',{q_o:'s_pages_2',q_posts:'p_all',q_del:func_del,q_add:func_add,q_corr:func_corr});return false}}else{alert(del_no);return false}};break;case 2:{tid=parseInt(tid,0,-1);if(tid>=0){req_A_Send('GET',{act:'ST',t:tid,st:E,view:A},I,null,'s_pages_1',{q_o:'s_pages_2',q_posts:'p_all',q_corr:func_corr});return false}};break;case 3:{if(confirm(del_q)){if((typeof(count_messages)=='number')&&(count_messages>1)){req_A_Send('GET',{act:'Msg',CODE:'05',MSID:E},I,null,'!!!',{q_del:func_del,q_corr:corr_msg});return false};return true}else{alert(del_no);return false}};break;case 5:{if(typeof(H)=='object'){H.f_ajax=function(C,D){if((typeof(D)=='object')&&(D.parentNode)){D.parentNode.innerHTML=C}};req_A_Send('GET',{act:'Login',CODE:'04',f:E,i:'1'},I,null,'!!!',{q_fi:H});return false}};break};return true};function time_kdown(A){if((A)&&(A.time_x)){clearTimeout(A.time_x);A.time_x=null}};function time_kup(D,E,F,G){time_kdown(D);if(D){var A='',B='';if((F)&&(typeof(F.value)=='string'))
A=F.value;if((G)&&(typeof(G.value)=='string')){B=G.value}else{if((typeof(G)=='string')&&(document.getElementById)){var C=getId(G);if((C)&&(typeof(C.value)=='string'))
B=C.value}};if((A!='')||(B!='')){if((typeof(D.t_str)!='string')||(D.t_str!=A)||(typeof(D.d_str)!='string')||(D.d_str!=B)){D.time_x=setTimeout(function(){D.time_x=null;D.t_str=A;D.d_str=B;req_A_Send('POST',{act:'Post',CODE:'title',f:E,title:A,description:B})},2000)}}}};var MessageMax="",MessageMin=2,Override=false;MessageMax=strToInt(MessageMax,1);var del_q="",del_no="",i_e=((document.all)&&(!document.getSelection))?1:0,n_6=(window.sidebar)?1:0,op_n=((document.all)&&(document.getSelection))?1:0,op_o=op_n&&(navigator.userAgent.substr(navigator.userAgent.toLowerCase().indexOf('opera')+6,5)<'7.21   ');function getId(A){return A.tagName?A:document.getElementById(A)};function getName(F){if(F&&F.tagName)
return F;var A=document.body.childNodes,B=function(E){if((E)&&(E.length)){for(var C=0;C<E.length;C++){var D=E[C];if((typeof(D.name)=='string')&&(D.name==F)){F=D;return true};if((D.childNodes)&&(B(D.childNodes)))
return true}};return false};if(B(A))
return F;return false};function strToInt(B,C,D){var A=parseInt(B);if(isNaN(A)){if(D){A=D}else{A=0}};if((C==1)&&(A<0))
A=0;return A};function of_postcolor(){if(typeof(document.getElementsByTagName)!='undefined'){var A=0,B={},C=document.getElementsByTagName("div"),D=new RegExp('^d([0-9]*)$',"i"),E=(typeof(window.innerWidth)=='number')?window.innerWidth:document.documentElement.clientWidth,F=function(I){if(I.parentNode){if(I.parentNode.className=='postcolor')
return false;return(true&&F(I.parentNode))};return true},G=function(I){if(I.parentNode&&I.parentNode.id){A=parseInt(I.parentNode.id.replace(D,"$1"),0,-1);if((!isNaN(A))&&(A>=0)){return I.parentNode.offsetWidth};return G(I.parentNode)};return I.offsetWidth};for(var J=0;J<C.length;J++){if(C[J].className=='postcolor'){if(F(C[J])){A=G(C[J]);if((typeof(A)=='number')&&(A>0)){if(A>E){C[J].className="post_scroll";B[J]=C[J]}}}}};for(var J in B){A=B[J].parentNode.offsetWidth;B[J].className="postcolor";if(A<B[J].parentNode.offsetWidth){B[J].className="post_scroll";if(i_e){B[J].style.width=B[J].parentNode.offsetWidth*0.96+"px"}else{B[J].style.width="97%"}}}};return};function emo_pop(){window.open('/index.php?act=legends&CODE=emoticons&s=','Legends','width=250,height=500,resizable=yes,scrollbars=yes')};function openStdAnswer(A){window.open('standard_answer/'+A+'_answer.html',lang_js['standart_answer_form'],'width=500,height=500,resizable=yes,scrollbars=yes')};function setAnswer(A){post.setSelectedText(A)};function find_users(){window.open('findusers.html','FindUsers','width=400,height=250,resizable=yes,scrollbars=yes')};function bbc_pop(){window.open('/index.php?act=legends&CODE=bbcode&s=','Legends','width=700,height=500,resizable=yes,scrollbars=yes')};function CheckLength(C,D,E){if(!C)
C="Post_area";if(!D)
D=1;if(!E)
E=MessageMax;var A=getId(C).value.length,B="";if(A>E){B=lang_js['msg_max_length']+" "+E+" "+lang_js['symbols']+".\n";alert(B+lang_js['you_have_used']+" "+A+" "+lang_js['symbols']+".\n"+lang_js['symbols_ostalos']+" "+(E-A));return false};if(A<D){B=lang_js['msg_min_length']+" "+D+" "+lang_js['symbols']+".\n";alert(B+lang_js['you_have_used']+" "+A+" "+lang_js['symbols']);return false};alert(lang_js['you_have_used']+" "+A+lang_js['symbols']+".\n"+lang_js['symbols_ostalos']+" "+(E-A));return true};function sendForm(G){if(window.button_action=="ON"){return};if(window['titleChecker']&&(typeof(obj=getId("selectfirst"))!='undefined')&&obj){if(!titleChecker())
return false};var A=getId("Post_Form");A.elements["input_for_opera"].value="true";A.elements["input_for_opera"].name="true";if(G=="preview"){A.elements["preview"].value="true"};if(G=="save"){A.elements["save"].value="true"};if(typeof(ValidateFormH)=='function'){if(ValidateFormH(false)){A.submit();window.button_action="ON"}}else{if(ValidateForm(false)){post_A=strToInt(post_A,1);var B=((post_A>0)?getId('Post_Form'):null);if(B){var C=f_post(-1),D=function(E){E=strToInt(E,1);if(E==1){A.submit();window.button_action="ON"}};if(C['n']>=0){s_t=strToInt(s_t,1);var F='all';if((typeof(v_t)!='boolean')||(!v_t))
F='';req_A_Send('POST',{q:B,st:s_t,sp:C['n'],view:F},'',null,'s_pages_1',{q_o:'s_pages_2',q_posts:'p_all',q_add:add_post,q_corr:func_corr,q_s_r:'sol_r',q_s_ch:'sol_ch',er_ajax:D});return}};A.submit();window.button_action="ON"}}};function extractRus(F){var A=[],B=0;function fltr(C){return((C>=1072&&C<=1103)||(C>=1040&&C<=1071))};for(var D=0,E;D<F.length;D++){if(fltr(F.charCodeAt(D))){for(E=D+1;E<F.length&&fltr(F.charCodeAt(E));++E);A.push(F.substring(D,E));D=E}};return A.join('')};function ValidateForm(E,F){if(!F)
F="Post_area";var A=getId(F).value.length,B="",C=getId("msg_title");if(C)
var D=C.value.length;if(E==1){if(document.REPLIER.msg_title.value.length<2)
B=lang_js['no_title_of_lettre']};if(MessageMin<0)
MessageMin=2;if(A<MessageMin)
B=lang_js['no_text_of_msg'];if(MessageMax!=0){if(A>MessageMax){B=lang_js['max_length']+" "+MessageMax+" "+lang_js['symbols_current_sybmols']+" "+A}};if(C){if(D<2)
B=lang_js['title_no1_symbol'];if(D>40){B=lang_js['max_length_of_title_N_symbols']+" "+D}};if(B!=""&&!Override){alert(B);return false};return true};function replaceAll(B,C,D){var A=B.indexOf(C);while(A>-1){B=B.replace(C,D);A=B.indexOf(C)};return B};function post_mup(A){if(document.down_pid==A&&document.up_post===false){document.up_post=true}else{document.down_pid=0}};function post_mdown(A){document.up_post=false;document.down_pid=A};function InsertQuote(D,E,F){if(InsertQuote.selection.toString().length>0){var A=getId("post"+F),B="",C=(typeof(A.innerText)!='undefined')?A.innerText:(typeof(A.textContent)!='undefined')?A.textContent:"";if(!(document.up_post===true&&document.down_pid==F)){alert(lang_js['quote_false_button_pressed']);return};post.target.value+=(((post.target.value.length>0)?"\n":"")+"[quote"+(D?("="+D+", "+E+(F?(", post"+F):"")):"")+"]"+(InsertQuote.selection.toString())+"[/quote]\n")}};InsertQuote.prepare=function(){if(document.getSelection){if(typeof(window.getSelection)!='undefined'){InsertQuote.selection=window.getSelection().toString()}else{InsertQuote.selection=document.getSelection()}}else{InsertQuote.selection=document.selection.createRange().text}};function PopUp(D,E,F,G,H,I,J,K,L){var A=K||0,B=L||0;J=Number(J);I=Number(I);if((parseInt(navigator.appVersion)>=4)&&(H)){A=(screen.width-F)/2;B=(screen.height-G)/2};var C=window.open(D,E,'width='+F+',height='+G+',top='+B+',left='+A+',resizable='+I+',scrollbars='+J+',location=no,directories=no,status=no,menubar=no,toolbar=no')};function cbchange(B){var A=getId(B);A.checked=1-A.checked;return false};function rbchange(B){var A=getId(B);A.checked=1;return false};function hl(A){if(ie){while(A.tagName!="TR")
A=A.parentElement}else{while(A.tagName!="TR")
A=A.parentNode};A.className="row3 cpPMSelected";return false};function dl(A){if(ie){while(A.tagName!="TR")
A=A.parentElement}else{while(A.tagName!="TR")
A=A.parentNode};A.className="row3";return false};function cca(A,B){if(A.checked)
hl(A);else dl(A);pmCheckIfAllChecked(B);return false};function pmCheckAll(D){var A=getId("mutliact"+D),B;for(var C=0;C<A.elements.length;C++){B=A.elements[C];if((B.name!="allbox")&&(B.type=="checkbox")&&(!B.disabled)){B.checked=A.allbox.checked;if(A.allbox.checked)
hl(B);else dl(B)}};return false};function pmCheckIfAllChecked(F){var A=getId("mutliact"+F),B=0,C=0,D;for(var E=0;E<A.elements.length;E++){D=A.elements[E];if((D.name!="allbox")&&(D.type=="checkbox")){B++;if(D.checked)
C++}};if(B==C)
A.allbox.checked=true;else A.allbox.checked=false;return false};function pmSelectRead(D){var A=getId("mutliact"+D),B;for(var C=0;C<A.elements.length;C++){B=A.elements[C];if((B.type=="hidden")&&(B.value==1)&&(!isNaN(B.name))){eval("fmobj.msgid_"+B.name+".checked = true;");hl(B)}};pmCheckIfAllChecked(D);return false};function pmSelectUnread(D){var A=getId("mutliact"+D),B;for(var C=0;C<A.elements.length;C++){B=A.elements[C];if((B.type=="hidden")&&(B.value==0)&&(!isNaN(B.name))){eval("fmobj.msgid_"+B.name+".checked = true;");hl(B)}};pmCheckIfAllChecked(D);return false};function pmInvertSelection(D){var A=getId("mutliact"+D),B;for(var C=0;C<A.elements.length;C++){B=A.elements[C];if((B.name!="allbox")&&(B.type=="checkbox")){B.checked=!B.checked;cca(B,D)}};pmCheckIfAllChecked(D);return false};function pmUnselectAll(D){var A=getId("mutliact"+D),B;for(var C=0;C<A.elements.length;C++){B=A.elements[C];if((B.name!="allbox")&&(B.type=="checkbox")){B.checked=false;dl(B)}};pmCheckIfAllChecked(D);return false};function getPost(C){var A=document.getElementsByName('entry'+C);if(A.length>0){var B=""+window.location.toString()+"";window.location=B.split("#")[0]+"#entry"+C;return false};return true};
function setAnchorDef(){var A=window.location.hash;if(A==''){var B=window.location.href,C=new RegExp('^.*?(\/|&)anchor(=|-|\/)?(.+?)(\/|&|$).*$',''),D=B.replace(C,"$3");if(D.length!=B.length){if((D!="")&&(scrollName(D)===false))
window.location.replace("#"+D)}}else{var E=A.split('_');if((E)&&(E.length>3)){if(E[0].charAt(0)=="#")
E[0]=E[0].slice(1);if((E[0]=="st")&&(E[2]=="view")){var F=(E[3]=="1")?true:false;E[1]=(F)?0:strToInt(E[1],1);if((E[1]!=s_t)||(F!=v_t)){var G={};G.button=0;v_t=F;m_a_ajax(E[1],G,2)}}}}};function scrollId(A){return scrollElement(getId(A))};function scrollName(A){return scrollElement(getName(A))};function scrollElement(B){if(B.tagName){var A=0;while(typeof(B)=='object'){A+=(B.offsetTop)?B.offsetTop:0;B=(B.offsetParent)?B.offsetParent:false};if(document.documentElement){document.documentElement.scrollTop=A;return true}else{if(document.body.setAttribute){document.body.setAttribute('scrollTop',A);return true}}};return false};
var tt_data={};function tooltip_hide(E){get_data(E);var A=tt_data['th'],B=tt_data['el'],C=tt_data['x'],D=tt_data['y'];if((A)&&(A.time_x)){clearTimeout(A.time_x);A.time_x=null};if((!B)||(!B.style))
return;B.time_x=setTimeout(function(){while(A=A.parentNode){if((A.tid)&&(A.tid==B.tid))
return};B.style.display='none'},500)};function get_data(D){var A=D.clientX+8,B=D.clientY+20,C=tt_data['el'];if(i_e){A=document.documentElement.scrollLeft+A;B=document.documentElement.scrollTop+B-2};tt_data['x']=A;tt_data['y']=B;tt_data['e']=((C.x_c!=0)&&(C.x_c<A)||(C.y_c!=0)&&(C.y_c<B))?1:0;C.x_c=A;C.y_c=B;tt_data['th']=D['target']?D['target']:D['srcElement']};function tooltip_show(D){get_data(D);var A=tt_data['el'],B=tt_data['x'],C=tt_data['y'];if((!A)||(!A.style)||(tt_data['e']==1))
return;A.style.left=B+"px";A.style.top=C+"px"};function add_event(A,B,C){if(window.addEventListener){A.addEventListener(C,B,false)}else{A.attachEvent('on'+C,B)};return 1};function tooltip_over(B){get_data(B);var A=tt_data['el'];if((A)&&(A.time_x)){clearTimeout(A.time_x);A.time_x=null}};function preview_post(E,F,G,H){if(G.time_x)
return;var A=getId('post_popup');if(!A){A=document.createElement("DIV");A.id='post_popup';document.body.appendChild(A);A.tid=0;if(!A.ev_out){A.ev_out=add_event(A,tooltip_hide,'mouseout')};if(!A.ev_over){A.ev_over=add_event(A,tooltip_over,'mouseover')}};if((!H)||(typeof(H)!='boolean')){H=false};tt_data['el']=A;A.style.display='none';A.innerHTML="Load...";if(!i_e){A.style.position="fixed"}else{A.style.position="absolute"};A.x_c=0;A.y_c=0;A.tid=E;G.tid=E;tooltip_show(F);if(!G.ev_out){G.ev_out=add_event(G,tooltip_hide,'mouseout')};if(!G.ev_move){G.ev_move=add_event(G,tooltip_show,'mousemove')};G.time_x=setTimeout(function(){G.time_x=null;A.style.display='block';c_A=true;if(H===true){req_A_Send('GET',{act:'Help',CODE:'01',HID:E},'',null,'post_popup')}else{var B=new RegExp('^(p)([0-9]+)$',"i"),C=parseInt(E.replace(B,"$2")),D=E.replace(B,"$1");if((typeof(D)!='string')||(D!='p')||(isNaN(C))||(typeof(C)!='number')){req_A_Send('GET',{act:'Post',CODE:'60',command:'60',t:E},'',null,'post_popup')}else{req_A_Send('GET',{act:'Post',CODE:'60',command:'60',p:C},'',null,'post_popup')}};c_A=false},1500)};
function wait_element(B,C,D,E){var A;if(D=='big'){A='<span id="w_element" style="display:none;"><img src="http://my.vingrad.ru/images/big_ajax-loader.gif" alt="" /> Загрузка...</span>'}else{A='<span id="w_element" style="display:none;"><img src="http://my.vingrad.ru/images/ajax-loader.gif" alt="" /> Загрузка...</span>'};if(B=='show'){if(C){if(!E){document.getElementById(C).innerHTML=A}else if(E=='left'){document.getElementById(C).innerHTML=A+document.getElementById(C).innerHTML}else if(E=='right'){document.getElementById(C).innerHTML=document.getElementById(C).innerHTML+A}else if(E=='top'){document.getElementById(C).innerHTML=A+"<br />"+document.getElementById(C).innerHTML}else if(E=='bottom'){document.getElementById(C).innerHTML=document.getElementById(C).innerHTML+"<br />"+A}};document.getElementById('w_element').style.display='block'}else{document.getElementById('w_element').style.display='none'}};function doLoad_with_wait_element(B,C,D,E){wait_element('show',C,D);document.getElementById(B).style.display='none';var A=new JsHttpRequest();A.onreadystatechange=function(){if(A&&A.readyState&&(A.readyState==4)){document.getElementById(B).style.display='block';document.getElementById(B).innerHTML=A.responseJS.q;wait_element('hide',C)}};A.caching=c_A;A.open('get','/index.php?'+'&ajax=1',true);A.send(E)};
function old_insert_new_tag(B){var A;A='<input autocomplete="off" id="tag_'+B+'" name="tag_'+B+'" size="30" type="text" value="" /><input type="button" name="submit" value="Добавить" /><div class="auto_complete" id="tag_auto_complete_'+B+'"></div><br />';document.getElementById("insert_new_tag_"+B).innerHTML=A;new Ajax.Autocompleter('tag_'+B,'tag_auto_complete_'+B,'/test.php',{})};function insert_new_tag(B,C,D){var A=c_A;c_A=false;doLoad_with_wait_element('tags_field','ajax_tag_load','small',{act:'Tags',CODE:'00',command:'00',forum_id:B,topic_id:C,tag:D});c_A=A};function get_tags(B,C,D){var A=c_A;c_A=false;doLoad_with_wait_element('tags_field','ajax_tag_load','small',{act:'Tags',CODE:'02',command:'02',forum_id:B,topic_id:C,tag:D});c_A=A};
var site_url='http://forum.vingrad.ru',ratings_image='stars',ratings_max='3',ratings_mouseover_image=new Image();ratings_mouseover_image.src=site_url+'/style_images/2/ratings/'+ratings_image+'/rating_over.gif';var minus_ratings_mouseover_image=new Image();minus_ratings_mouseover_image.src=site_url+'/style_images/2/ratings/'+ratings_image+'/minus_rating_over.gif';var post_id=0,forum_id=0,post_rating=0,rate_fadein_opacity=0,rate_fadeout_opacity=100,is_moz=(!document.all&&document.getElementById),is_being_rated=false;function rade_fadein_text(){if(rate_fadein_opacity<100){rate_fadein_opacity+=10;if(op_n){rate_fadein_opacity=100}else if(i_e){document.getElementById('post-ratings-'+post_id).filters.alpha.opacity=rate_fadein_opacity}else if(is_moz){document.getElementById('post-ratings-'+post_id).style.MozOpacity=(rate_fadein_opacity/100)};setTimeout("rade_fadein_text()",100)}else{rate_fadein_opacity=100;rate_unloading_text();is_being_rated=false}};function current_rating(B,C,D){if(!is_being_rated){post_id=B;post_rating=C;forum_id=D;for(var A=-1;A>=C;A--){document.images['rating_'+post_id+'_'+A].src=eval("minus_ratings_mouseover_image.src")};for(var A=1;A<=C;A++){document.images['rating_'+post_id+'_'+A].src=eval("ratings_mouseover_image.src")}}};function ratings_off(B,C){if(!is_being_rated){for(var A=-1;A>=(0-ratings_max);A--){if(A>=B){document.images['rating_'+post_id+'_'+A].src=site_url+'/style_images/2/ratings/'+ratings_image+'/minus_rating_on.gif'}else if(A==C){document.images['rating_'+post_id+'_'+A].src=site_url+'/style_images/2/ratings/'+ratings_image+'/minus_rating_half.gif'}else{document.images['rating_'+post_id+'_'+A].src=site_url+'/style_images/2/ratings/'+ratings_image+'/minus_rating_off.gif'}};for(var A=1;A<=ratings_max;A++){if(A<=B){document.images['rating_'+post_id+'_'+A].src=site_url+'/style_images/2/ratings/'+ratings_image+'/rating_on.gif'}else if(A==C){document.images['rating_'+post_id+'_'+A].src=site_url+'/style_images/2/ratings/'+ratings_image+'/rating_half.gif'}else{document.images['rating_'+post_id+'_'+A].src=site_url+'/style_images/2/ratings/'+ratings_image+'/rating_off.gif'}}}};function rate_loading_text(){document.getElementById('post-ratings-'+post_id+'-loading').style.display='block'};function rate_unloading_text(){document.getElementById('post-ratings-'+post_id+'-loading').style.display='none'};function rate_post(){if(!is_being_rated){is_being_rated=true;rate_loading_text();rate_process()}else{alert(lang_js['please_wait_for_current_rate'])}};function rate_process(){if(rate_fadeout_opacity>0){rate_fadeout_opacity-=10;if(op_n){rate_fadein_opacity=0}else if(i_e){document.getElementById('post-ratings-'+post_id).filters.alpha.opacity=rate_fadeout_opacity}else if(is_moz){document.getElementById('post-ratings-'+post_id).style.MozOpacity=(rate_fadeout_opacity/100)};setTimeout("rate_process()",100)}else{rate_fadeout_opacity=0;req_A_Send('GET',{act:'Post',CODE:'50',command:'50',f:forum_id,pid:post_id,score:post_rating},'',rate_process_end(),'post-ratings-'+post_id)}};function rate_process_end(){rate_fadein_opacity=0;rate_fadeout_opacity=100;rade_fadein_text()};
var menuwidth='165px',menubgcolor='#FFFFFF',disappeardelay=250,hidemenu_onclick="yes",dropmenuobj,ie4=document.all,ns6=document.getElementById&&!document.all;if(ie4||ns6){document.write('<div id="dropmenudiv" style="visibility:hidden;width:'+menuwidth+';background-color:'+menubgcolor+'" onMouseover="clearhidemenu()" onMouseout="dynamichide(event)"></div>')};function getposOffset(C,D){var A=(D=="left")?C.offsetLeft:C.offsetTop,B=C.offsetParent;while(B!=null){A=(D=="left")?A+B.offsetLeft:A+B.offsetTop;B=B.offsetParent};return A};function showhide(A,B,C,D,E){if(ie4||ns6){dropmenuobj.style.left=dropmenuobj.style.top="-500px"};if(E!=""){dropmenuobj.widthobj=dropmenuobj.style;dropmenuobj.widthobj.width=E};if(B.type=="click"&&A.visibility==D||B.type=="mouseover"){A.visibility=C}else
if(B.type=="click"){A.visibility=D}};function iecompattest(){return(document.compatMode&&document.compatMode!="BackCompat")?document.documentElement:document.body};function clearbrowseredge(D,E){var A=0;if(E=="rightedge"){var B=ie4&&!window.opera?iecompattest().scrollLeft+iecompattest().clientWidth-15:window.pageXOffset+window.innerWidth-15;dropmenuobj.contentmeasure=dropmenuobj.offsetWidth;if(B-dropmenuobj.x<dropmenuobj.contentmeasure){A=dropmenuobj.contentmeasure-D.offsetWidth}}else{var C=ie4&&!window.opera?iecompattest().scrollTop:window.pageYOffset,B=ie4&&!window.opera?iecompattest().scrollTop+iecompattest().clientHeight-15:window.pageYOffset+window.innerHeight-18;dropmenuobj.contentmeasure=dropmenuobj.offsetHeight;if(B-dropmenuobj.y<dropmenuobj.contentmeasure){A=dropmenuobj.contentmeasure+D.offsetHeight;if((dropmenuobj.y-C)<dropmenuobj.contentmeasure)
A=dropmenuobj.y+D.offsetHeight-C}};return A};function populatemenu(A){if(ie4||ns6){dropmenuobj.innerHTML=A.join("")}};function dropdownmenu(A,B,C,D,E){if(window.event){event.cancelBubble=true}else if(B.stopPropagation){B.stopPropagation()};clearhidemenu();dropmenuobj=document.getElementById?document.getElementById("dropmenudiv"):dropmenudiv;populatemenu(C);if(ie4||ns6){showhide(dropmenuobj.style,B,"visible","hidden",D);dropmenuobj.x=getposOffset(A,"left");dropmenuobj.y=getposOffset(A,"top");dropmenuobj.style.left=dropmenuobj.x-E-clearbrowseredge(A,"rightedge")+"px";dropmenuobj.style.top=dropmenuobj.y-clearbrowseredge(A,"bottomedge")+A.offsetHeight+"px"};return clickreturnvalue()};function clickreturnvalue(){if(ie4||ns6){return false}else{return true}};function contains_ns6(A,B){while(B.parentNode){if((B=B.parentNode)==A){return true}};return false};function dynamichide(A){if(ie4&&!dropmenuobj.contains(A.toElement)){delayhidemenu()}else if(ns6&&A.currentTarget!=A.relatedTarget&&!contains_ns6(A.currentTarget,A.relatedTarget)){delayhidemenu()}};function hidemenu(A){if(typeof dropmenuobj!="undefined"){if(ie4||ns6){dropmenuobj.style.visibility="hidden"}}};function delayhidemenu(){if(ie4||ns6){delayhide=setTimeout("hidemenu()",disappeardelay)}};function clearhidemenu(){if(typeof delayhide!="undefined"){clearTimeout(delayhide)}};if(hidemenu_onclick=="yes"){document.onclick=hidemenu};